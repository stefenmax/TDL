总体说明：

1.TDL文件夹下为基于张量字典学习的能谱CT重建的程序。

2.运行前配置：在运行程序前，需要进行一些配置。首先，在本文件夹的Depandency子文件夹中有poblano_toolbox和tensor_toolbox两个工具箱，是Sandia国家实验室发布的张量工具箱。按顺序安装这两个工具箱，在各自文件夹中有安装说明。本程序还会调用到上层路径下的DL_func文件夹，该文件夹是在Ron Rubinstein编写的字典学习工具箱的基础上修改得到的，包含了向量字典和张量字典学习的诸多函数，由于涉及到了与C语言的混编，因此需要在Matlab中通过mex -setup命令来设置混编。

3.ReconTDL_main.m是本方法的主函数,ReconTDL_core.m是方法的程序核心，重建（中间）结果将保存在上层路径下的\Results文件夹下创建的新文件夹中。DL_CPD_ratio.m用于训练张量字典的主函数，kcpd20140705.m是训练张量字典的程序核心，对MOBY仿真数据和小鼠实际数据训练得到的张量字典已经保存在上层路径下的\Results文件夹下。imratioMC.m对多通道图像的各个通道模值进行归一化。

4.程序执行：一般情况下，事先对多通道数据进行FBP重建，然后使用DL_CPD_ratio.m根据重建图像训练得到张量字典并保存。在ReconTDL_main.m中加载投影数据和训练得到的字典，则可重建图像。在本程序中，已经训练并保存了MOBY仿真数据和实际小老鼠数据的张量字典，因此直接运行ReconTDL_main.m即可，大概需要运行8个小时。


